{% include 'navbar.html' %}
{% block content %}

    <div class="flex justify-center">
        
        <!--Offer-->
        <div class="w-1/3 p-4">
            <div class="bg-white border border-gray-200 rounded-lg shadow-md p-4">
                <div class="max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
                    <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">{{offer.title}}</h5>
                    <h1>Descripción de la vacante:</h1><br>
                    <p id="description" class="mb-3 font-normal text-gray-700 dark:text-gray-400">
                        {{offer.description}}    
                    </p>
                </div>
            </div>
        </div>

        <!--Sentences - BIAS -->
        <div class="w-1/3 p-4">
            <div class="bg-white border border-gray-200 rounded-lg shadow-md p-4">
                <div class="max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
                    <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">Oraciones con sesgo</h5>
                        {{suggestion.highlight_words}}
                </div>
            </div>
        </div>
        

        <!--Highlight-->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var description = document.getElementById('description');
                var biasSentences = "{{suggestion.highlight_words}}".split('//');
                for (var i = 0; i < biasSentences.length; i++) {
                    var sentence = biasSentences[i].trim();
                    if (sentence !== "") {
                        var regex = new RegExp(sentence, 'g');
                        description.innerHTML = description.innerHTML.replace(regex, '<span style="background-color: #D24D55; color: white; border-radius: 8px; padding: 2px;">' + sentence + '</span>');
                    }
                }
            });
        </script>
            
        <!--Stadistics-->
        <div class="w-1/3 p-4">
            <div class="bg-white border border-gray-200 rounded-lg shadow-md p-4">  
                <div class="max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
                    <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">Estadísticas</h5>    
                    
                    <!--Graphics-->
                    {% for bias in offer.bias.all %}
                        <div class="mb-1 text-base font-medium text-gray-700 dark:text-gray-400">{{ bias }}</div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-4 dark:bg-gray-700">

                            {% if bias|lower == 'racismo' %}
                                <div class="bg-red-600 h-2.5 rounded-full dark:bg-gray-300" style="width: 100%"></div>
                            {% elif bias|lower == 'sexismo' %}
                                <div class="bg-blue-600 h-2.5 rounded-full" style="width: 100%"></div>
                            {% elif bias|lower == 'xenofobia' %}
                                <div class="bg-green-600 h-2.5 rounded-full dark:bg-green-500" style="width: 100%"></div>
                            {% elif bias|lower == 'homofobia' %}
                                <div class="bg-yellow-400 h-2.5 rounded-full" style="width: 100%"></div>
                            {% else %}
                                <div style="width: 0%"></div>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!--Suggestions-->
        <div class="w-1/3 p-4">
            <div class="bg-white border border-gray-200 rounded-lg shadow-md p-4">
                <div class="max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
                    <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">Sugerencias</h5>
                    <p class="mb-3 font-normal text-gray-700 dark:text-gray-400">
                        {{offer.title}}<br><br>
                        {{suggestion.corrected_description}}
                    </p>
                    <a href="{% url 'replace' offer.id %}" class="inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                        Aplicar sugerencias
                        <svg class="w-3.5 h-3.5 ml-2" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>

    
{% endblock content %}